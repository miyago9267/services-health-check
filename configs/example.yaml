checks:
  - type: http
    name: example-http
    url: https://example.com
    interval: 30s
    timeout: 5s
  - type: k8s_pods
    name: gke-pods
    namespace: default
    label_selector: app=your-app
    kubeconfig: ~/.kube/config
    context: your-context
    min_ready: 1
    interval: 30s
  - type: ssl
    name: gcp-ssl
    address: your-domain.example.com:443
    server_name: your-domain.example.com
    warn_before: 720h
    crit_before: 168h
    interval: 1h
  - type: cloudflare_token
    name: cf-token
    token: your-cloudflare-token
    schedule: "*/10 * * * *"
  - type: domain_expiry
    name: domain-expiry
    domain: example.com
    warn_before: 720h
    crit_before: 168h
    rdap_base_urls:
      - https://rdap.org
    schedule: "0 0 * * *"

policies:
  - name: default
    cooldown: 0s
    notify_on_recovery: false

channels:
  - type: discord
    name: discord-alert
    url: https://discord.com/api/webhooks/your/webhook
    username: healthd
    timeout: 5s
  - type: slack
    name: slack-alert
    url: https://hooks.slack.com/services/your/webhook
    timeout: 5s
  - type: gchat
    name: gchat-alert
    url: https://chat.googleapis.com/v1/spaces/your/webhook
    timeout: 5s
  - type: smtp
    name: smtp-alert
    smtp_host: smtp.example.com
    smtp_port: 587
    smtp_username: your-user
    smtp_password: your-password
    smtp_from: alert@example.com
    smtp_to:
      - ops@example.com
    smtp_subject: "[${ENV:-local}] healthd"
    smtp_implicit_tls: false
    smtp_skip_verify: false
    timeout: 10s

routes:
  - match:
      status: CRIT
    to:
      - discord-alert
      - slack-alert
      - gchat-alert
  - match:
      status: WARN
    to:
      - discord-alert
  - match:
      status: OK
    to:
      - discord-alert

log:
  level: info
  format: text

notify:
  problem_limit: 5
  aggregate_by_type: true
  aggregate_window: 30s
  stop_on_fail: false
  run_once: false
